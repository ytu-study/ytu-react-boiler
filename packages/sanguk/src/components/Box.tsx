import classnames from 'classnames';
import type { AllHTMLAttributes, ElementType } from 'react';
import React from 'react';
import { sprinkles } from '@/styles/sprinkles.css';
import type { Sprinkles } from '@/styles/sprinkles.css';

type Attributes = Omit<AllHTMLAttributes<HTMLElement>, 'className' | 'content' | 'height' | 'translate' | 'color' | 'width' | 'cursor'>;

export interface BoxProps extends Attributes, Sprinkles {
  tag?: ElementType;
  className?: Parameters<typeof classnames>[0];
}

const atomClasses = ({
  padding,
  paddingX,
  paddingY,
  paddingTop,
  paddingBottom,
  paddingLeft,
  paddingRight,
  margin,
  marginX,
  marginY,
  marginTop,
  marginBottom,
  marginLeft,
  marginRight,
  display,
  alignItems,
  justifyContent,
  flexDirection,
  flexWrap,
  flexGrow,
  flexShrink,
  borderRadius,
  position,
  top,
  bottom,
  left,
  right,
  inset,
  width,
  zIndex,
  opacity,
  pointerEvents,
  cursor,
  textAlign,
  maxWidth,
  minWidth,
  transition,
  overflow,
  fontSize,
  lineHeight,
  alignContent,
  alignSelf,
  borderB,
  borderL,
  borderBottomLeftRadius,
  borderBottomRightRadius,
  borderBottomWidth,
  borderLeftWidth,
  borderR,
  borderRightWidth,
  borderTopLeftRadius,
  borderTopRightRadius,
  borderTopWidth,
  borderStyle,
  borderT,
  borderWidth,
  borderX,
  borderY,
  boxShadow,
  columnGap,
  gap,
  gapX,
  gapY,
  flex,
  flexBasis,
  fontFamily,
  fontStyle,
  fontWeight,
  height,
  insetX,
  insetY,
  justifyItems,
  justifySelf,
  maxHeight,
  minHeight,
  objectFit,
  order,
  placeItems,
  placeContent,
  placeSelf,
  overflowX,
  overflowY,
  rounded,
  roundedB,
  roundedBL,
  roundedBR,
  roundedL,
  roundedR,
  roundedT,
  roundedTL,
  roundedTR,
  rowGap,
  visibility,
  tag = 'div',
  children,
  className,
  style,
  color,
  background,
  ...attrs
}: BoxProps) => {
  return {
    tag,
    children,
    className,
    style,
    color,
    background,
    attrs,
    atom: sprinkles({
      padding,
      paddingX,
      paddingY,
      paddingTop,
      paddingBottom,
      paddingLeft,
      paddingRight,
      margin,
      marginX,
      marginY,
      marginTop,
      marginBottom,
      marginLeft,
      marginRight,
      display,
      alignItems,
      justifyContent,
      flexDirection,
      flexWrap,
      flexGrow,
      flexShrink,
      borderRadius,
      position,
      top,
      bottom,
      left,
      right,
      inset,
      width,
      zIndex,
      opacity,
      pointerEvents,
      cursor,
      textAlign,
      maxWidth,
      minWidth,
      transition,
      overflow,
      fontSize,
      lineHeight,
      alignContent,
      alignSelf,
      borderB,
      borderL,
      borderBottomLeftRadius,
      borderBottomRightRadius,
      borderBottomWidth,
      borderLeftWidth,
      borderR,
      borderRightWidth,
      borderTopLeftRadius,
      borderTopRightRadius,
      borderTopWidth,
      borderStyle,
      borderT,
      borderWidth,
      borderX,
      borderY,
      boxShadow,
      columnGap,
      gap,
      gapX,
      gapY,
      flex,
      flexBasis,
      fontFamily,
      fontStyle,
      fontWeight,
      height,
      insetX,
      insetY,
      justifyItems,
      justifySelf,
      maxHeight,
      minHeight,
      objectFit,
      order,
      placeItems,
      placeContent,
      placeSelf,
      overflowX,
      overflowY,
      rounded,
      roundedB,
      roundedBL,
      roundedBR,
      roundedL,
      roundedR,
      roundedT,
      roundedTL,
      roundedTR,
      rowGap,
      visibility,
    }),
  };
};

export default function Box(props: BoxProps): JSX.Element {
  const { tag, children, style, className, attrs, atom } = atomClasses(props);
  return React.createElement(tag, {
    className: classnames(className, atom),
    style,
    children,
    ...attrs,
  });
}
